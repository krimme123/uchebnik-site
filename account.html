<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Личный кабинет — Uchebnik</title>
<link rel="stylesheet" href="style.css">
<style>
  .account-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .account-header {
    display: flex;
    justify-content: between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--border);
  }
  
  .user-info {
    display: flex;
    align-items: center;
    gap: 15px;
  }
  
  .user-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    font-weight: bold;
  }
  
  .user-details h1 {
    margin: 0;
    font-size: 1.5rem;
  }
  
  .user-details p {
    margin: 5px 0 0 0;
    color: var(--muted);
  }
  
  .account-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
    border-bottom: 2px solid var(--border);
    flex-wrap: wrap;
  }
  
  .account-tab {
    padding: 12px 20px;
    background: none;
    border: none;
    cursor: pointer;
    font-weight: 600;
    color: var(--muted);
    transition: all 0.3s ease;
    border-bottom: 3px solid transparent;
    margin-bottom: -2px;
  }
  
  .account-tab.active {
    color: var(--accent);
    border-bottom-color: var(--accent);
  }
  
  .tab-content {
    display: none;
    animation: fadeIn 0.4s ease-out;
  }
  
  .tab-content.active {
    display: block;
  }
  
  .profile-form {
    max-width: 500px;
  }
  
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--dark);
  }
  
  .form-input {
    padding: 12px 15px;
    width: 100%;
    box-sizing: border-box;
    border: 2px solid var(--border);
    border-radius: 10px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: var(--bg);
    color: var(--dark);
  }
  
  .form-input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(31,111,235,0.1);
    outline: none;
  }
  
  .purchases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
  }
  
  .purchase-card {
    background: var(--card);
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 20px var(--shadow);
    border: 1px solid var(--border);
    transition: all 0.3s ease;
  }
  
  .purchase-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 30px rgba(12,18,28,0.15);
  }
  
  .purchase-header {
    display: flex;
    justify-content: between;
    align-items: start;
    margin-bottom: 15px;
  }
  
  .purchase-title {
    font-weight: 600;
    color: var(--dark);
    margin: 0;
  }
  
  .purchase-price {
    background: var(--accent);
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
  }
  
  .purchase-date {
    color: var(--muted);
    font-size: 0.9rem;
    margin: 5px 0;
  }
  
  .purchase-status {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
  }
  
  .status-completed {
    background: rgba(34, 197, 94, 0.1);
    color: #16a34a;
  }
  
  .status-pending {
    background: rgba(234, 179, 8, 0.1);
    color: #ca8a04;
  }
  
  .operations-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }
  
  .operation-item {
    background: var(--card);
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 6px 20px var(--shadow);
    border: 1px solid var(--border);
    display: flex;
    justify-content: between;
    align-items: center;
  }
  
  .operation-info {
    flex: 1;
  }
  
  .operation-title {
    font-weight: 600;
    color: var(--dark);
    margin: 0 0 5px 0;
  }
  
  .operation-date {
    color: var(--muted);
    font-size: 0.9rem;
    margin: 0;
  }
  
  .operation-amount {
    font-weight: 600;
    font-size: 1.1rem;
  }
  
  .amount-positive {
    color: #16a34a;
  }
  
  .amount-negative {
    color: #dc2626;
  }
  
  .logout-btn {
    background: transparent;
    color: var(--muted);
    border: 2px solid var(--border);
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .logout-btn:hover {
    color: #dc2626;
    border-color: #dc2626;
  }
  
  .empty-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--muted);
  }
  
  .empty-state p {
    margin: 10px 0 0 0;
  }
  
  @media (max-width: 768px) {
    .account-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 15px;
    }
    
    .purchases-grid {
      grid-template-columns: 1fr;
    }
    
    .operation-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 10px;
    }
  }
</style>
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <a class="logo" href="index.html">Uchebnik</a>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html">Главная</a></li>
          <li><a href="works.html">Работы</a></li>
          <li><a href="reviews.html">Отзывы</a></li>
          <li><a href="news.html">Новости</a></li>
          <li><a href="contacts.html">Контакты</a></li>
          <li><a href="account.html" class="active">Личный кабинет</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <div class="account-container">
      <div class="account-header">
        <div class="user-info">
          <div class="user-avatar" id="user-avatar">U</div>
          <div class="user-details">
            <h1 id="user-name">Пользователь</h1>
            <p id="user-email">user@example.com</p>
          </div>
        </div>
        <button class="logout-btn" id="logout-btn">Выйти</button>
      </div>
      
      <div class="account-tabs">
        <button class="account-tab active" data-tab="profile">Профиль</button>
        <button class="account-tab" data-tab="purchases">Мои покупки</button>
        <button class="account-tab" data-tab="operations">Операции</button>
        <button class="account-tab" data-tab="settings">Настройки</button>
      </div>
      
      <!-- Вкладка профиля -->
      <div class="tab-content active" id="profile-tab">
        <h2>Личная информация</h2>
        <div class="profile-form">
          <div class="form-group">
            <label for="profile-name">Имя</label>
            <input type="text" class="form-input" id="profile-name" placeholder="Ваше имя">
          </div>
          
          <div class="form-group">
            <label for="profile-email">Email</label>
            <input type="email" class="form-input" id="profile-email" placeholder="your@email.com">
          </div>
          
          <div class="form-group">
            <label for="profile-phone">Телефон</label>
            <input type="tel" class="form-input" id="profile-phone" placeholder="+7 (XXX) XXX-XX-XX">
          </div>
          
          <button class="btn" id="save-profile-btn">Сохранить изменения</button>
        </div>
      </div>
      
      <!-- Вкладка покупок -->
      <div class="tab-content" id="purchases-tab">
        <h2>Купленные работы</h2>
        <div class="purchases-grid" id="purchases-list">
          <!-- Покупки будут загружены через JavaScript -->
        </div>
      </div>
      
      <!-- Вкладка операций -->
      <div class="tab-content" id="operations-tab">
        <h2>История операций</h2>
        <div class="operations-list" id="operations-list">
          <!-- Операции будут загружены через JavaScript -->
        </div>
      </div>
      
      <!-- Вкладка настроек -->
      <div class="tab-content" id="settings-tab">
        <h2>Настройки безопасности</h2>
        <div class="profile-form">
          <div class="form-group">
            <label for="current-password">Текущий пароль</label>
            <input type="password" class="form-input" id="current-password" placeholder="Введите текущий пароль">
          </div>
          
          <div class="form-group">
            <label for="new-password">Новый пароль</label>
            <input type="password" class="form-input" id="new-password" placeholder="Не менее 6 символов">
          </div>
          
          <div class="form-group">
            <label for="confirm-password">Подтверждение пароля</label>
            <input type="password" class="form-input" id="confirm-password" placeholder="Повторите новый пароль">
          </div>
          
          <button class="btn" id="change-password-btn">Сменить пароль</button>
        </div>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="footer-inner">
      <p>© 2025 Uchebnik. Все права защищены</p>
      <nav class="footer-nav">
        <a href="index.html">Главная</a>
        <a href="works.html">Работы</a>
        <a href="reviews.html">Отзывы</a>
        <a href="news.html">Новости</a>
        <a href="contacts.html">Контакты</a>
      </nav>
    </div>
  </footer>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Проверка авторизации
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser) {
      window.location.href = 'login.html';
      return;
    }
    
    // Загрузка данных пользователя
    document.getElementById('user-name').textContent = currentUser.name || 'Пользователь';
    document.getElementById('user-email').textContent = currentUser.email;
    document.getElementById('profile-name').value = currentUser.name || '';
    document.getElementById('profile-email').value = currentUser.email;
    document.getElementById('user-avatar').textContent = (currentUser.name || 'U').charAt(0).toUpperCase();
    
    // Переключение вкладок
    const tabs = document.querySelectorAll('.account-tab');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabs.forEach(tab => {
      tab.addEventListener('click', function() {
        const tabName = this.getAttribute('data-tab');
        
        tabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        
        tabContents.forEach(content => content.classList.remove('active'));
        document.getElementById(`${tabName}-tab`).classList.add('active');
      });
    });
    
    // Сохранение профиля
    document.getElementById('save-profile-btn').addEventListener('click', function() {
      const name = document.getElementById('profile-name').value;
      const email = document.getElementById('profile-email').value;
      
      if (!name || !email) {
        alert('Заполните обязательные поля');
        return;
      }
      
      // Обновляем данные пользователя
      currentUser.name = name;
      currentUser.email = email;
      localStorage.setItem('currentUser', JSON.stringify(currentUser));
      
      // Обновляем отображение
      document.getElementById('user-name').textContent = name;
      document.getElementById('user-email').textContent = email;
      document.getElementById('user-avatar').textContent = name.charAt(0).toUpperCase();
      
      alert('Данные успешно сохранены!');
    });
    
    // Загрузка покупок
    function loadPurchases() {
      const purchases = JSON.parse(localStorage.getItem('userPurchases') || '[]');
      const purchasesList = document.getElementById('purchases-list');
      
      if (purchases.length === 0) {
        purchasesList.innerHTML = `
          <div class="empty-state">
            <h3>Покупок пока нет</h3>
            <p>Перейдите в каталог работ, чтобы сделать первую покупку</p>
            <a href="works.html" class="btn" style="margin-top: 15px;">Перейти к работам</a>
          </div>
        `;
        return;
      }
      
      purchasesList.innerHTML = purchases.map(purchase => `
        <div class="purchase-card">
          <div class="purchase-header">
            <h3 class="purchase-title">${purchase.title}</h3>
            <span class="purchase-price">${purchase.price} ₽</span>
          </div>
          <p class="purchase-date">Куплено: ${purchase.date}</p>
          <span class="purchase-status ${purchase.status === 'completed' ? 'status-completed' : 'status-pending'}">
            ${purchase.status === 'completed' ? 'Доступно' : 'Ожидание'}
          </span>
          <div style="margin-top: 15px;">
            <a href="${purchase.downloadUrl || '#'}" class="card-link" ${purchase.status !== 'completed' ? 'style="opacity: 0.5; pointer-events: none;"' : ''}>
              Скачать
            </a>
          </div>
        </div>
      `).join('');
    }
    
    // Загрузка операций
    function loadOperations() {
      const operations = JSON.parse(localStorage.getItem('userOperations') || '[]');
      const operationsList = document.getElementById('operations-list');
      
      if (operations.length === 0) {
        operationsList.innerHTML = `
          <div class="empty-state">
            <h3>Операций пока нет</h3>
            <p>Здесь будет отображаться история ваших платежей</p>
          </div>
        `;
        return;
      }
      
      operationsList.innerHTML = operations.map(operation => `
        <div class="operation-item">
          <div class="operation-info">
            <h3 class="operation-title">${operation.description}</h3>
            <p class="operation-date">${operation.date}</p>
          </div>
          <div class="operation-amount ${operation.amount > 0 ? 'amount-positive' : 'amount-negative'}">
            ${operation.amount > 0 ? '+' : ''}${operation.amount} ₽
          </div>
        </div>
      `).join('');
    }
    
    // Смена пароля
    document.getElementById('change-password-btn').addEventListener('click', function() {
      const currentPassword = document.getElementById('current-password').value;
      const newPassword = document.getElementById('new-password').value;
      const confirmPassword = document.getElementById('confirm-password').value;
      
      if (!currentPassword || !newPassword || !confirmPassword) {
        alert('Заполните все поля');
        return;
      }
      
      if (newPassword !== confirmPassword) {
        alert('Пароли не совпадают');
        return;
      }
      
      if (newPassword.length < 6) {
        alert('Пароль должен содержать не менее 6 символов');
        return;
      }
      
      // В реальном приложении здесь была бы проверка текущего пароля
      alert('Пароль успешно изменен!');
      
      // Очищаем поля
      document.getElementById('current-password').value = '';
      document.getElementById('new-password').value = '';
      document.getElementById('confirm-password').value = '';
    });
    
    // Выход из системы
    document.getElementById('logout-btn').addEventListener('click', function() {
      localStorage.removeItem('currentUser');
      window.location.href = 'login.html';
    });
    
    // Загружаем данные при открытии соответствующих вкладок
    loadPurchases();
    loadOperations();
    
    // Добавляем тестовые данные, если их нет
    if (!localStorage.getItem('userPurchases')) {
      const testPurchases = [
        {
          title: 'ВПР по математике 8 класс',
          price: 299,
          date: '15.03.2025',
          status: 'completed',
          downloadUrl: '#'
        },
        {
          title: 'ОГЭ по русскому языку 2025',
          price: 399,
          date: '10.03.2025',
          status: 'completed',
          downloadUrl: '#'
        },
        {
          title: 'ЕГЭ по физике - полный курс',
          price: 1299,
          date: '05.03.2025',
          status: 'pending',
          downloadUrl: '#'
        }
      ];
      localStorage.setItem('userPurchases', JSON.stringify(testPurchases));
      loadPurchases();
    }
    
    if (!localStorage.getItem('userOperations')) {
      const testOperations = [
        {
          description: 'Пополнение счета',
          amount: 2000,
          date: '15.03.2025'
        },
        {
          description: 'Покупка: ВПР по математике 8 класс',
          amount: -299,
          date: '15.03.2025'
        },
        {
          description: 'Покупка: ОГЭ по русскому языку 2025',
          amount: -399,
          date: '10.03.2025'
        }
      ];
      localStorage.setItem('userOperations', JSON.stringify(testOperations));
      loadOperations();
    }
  });
</script>
</body>
</html>
